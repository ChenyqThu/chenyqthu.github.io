<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="UniFiå“ç‰Œå±‹æ¶æ„ - SMBç½‘ç»œç•Œçš„è‹¹æœï¼Œé‡æ–°å®šä¹‰ä¼ä¸šç½‘ç»œç®¡ç†ä½“éªŒ">
    <meta name="keywords" content="UniFi, å“ç‰Œå±‹, ä¼ä¸šç½‘ç»œ, SMB, ç½‘ç»œç®¡ç†, Ubiquiti">
    <title>UniFiå“ç‰Œå±‹æ¶æ„å›¾ - SMBç½‘ç»œç•Œçš„è‹¹æœ</title>
    
    <!-- DNSé¢„è§£æ -->
    <link rel="dns-prefetch" href="//unpkg.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    
    <style>
        body {
            font-family: 'SF Pro Display', 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0b66ff 0%, #004db8 50%, #003a91 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #0f172a;
        }

        .container {
            background: #ffffff;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 20px 45px rgba(0,0,0,0.12);
            max-width: 1200px;
            width: 100%;
        }

        .title {
            text-align: center;
            font-size: 32px;
            font-weight: 800;
            color: #0f172a;
            letter-spacing: 0.3px;
            margin-bottom: 50px;
            position: relative;
        }

        .title:after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 88px;
            height: 3px;
            background: linear-gradient(90deg, #0ea5e9, #2563eb);
            border-radius: 2px;
        }

        .house {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
        }

        /* UniFi Logoè£…é¥° */
        .unifi-logo {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #0ea5e9, #2563eb);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 20px;
            box-shadow: 0 10px 24px rgba(14, 165, 233, 0.35);
            border: 4px solid white;
            transition: transform .25s ease, box-shadow .25s ease;
            cursor: default;
        }
        .unifi-logo:hover {
            transform: translateX(-50%) scale(1.06);
            box-shadow: 0 14px 28px rgba(14, 165, 233, 0.45);
        }

        /* å±‹é¡¶ - å“ç‰Œå®šä½ */
        .roof {
            width: 0;
            height: 0;
            border-left: 400px solid transparent;
            border-right: 400px solid transparent;
            border-bottom: 120px solid #0b66ff;
            margin: 0 auto;
            position: relative;
        }

        .roof-text {
            position: absolute;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            width: auto;
            max-width: min(90vw, 700px);
            text-align: center;
            font-size: 22px;
            font-weight: 700;
            color: white;
            background: linear-gradient(45deg, #0ea5e9, #2563eb);
            padding: 18px 35px;
            border-radius: 50px;
            box-shadow: 0 10px 24px rgba(14, 165, 233, 0.35);
            border: 3px solid rgba(255,255,255,0.22);
            transition: transform .25s ease, box-shadow .25s ease;
        }
        .roof-text:hover {
            transform: translateX(-50%) scale(1.02);
            box-shadow: 0 14px 32px rgba(14, 165, 233, 0.45);
        }

        .roof-subtitle {
            font-size: 14px;
            margin-top: 6px;
            opacity: 0.95;
            font-weight: 500;
        }

        /* æˆ¿å±‹ä¸»ä½“ */
        .house-body {
            width: 100%;
            max-width: 900px;
            min-height: 340px;
            background: linear-gradient(135deg, #111827, #1f2937);
            margin: -1px auto 0 auto;
            position: relative;
            display: flex;
            align-items: stretch;
            border-radius: 0;
        }

        /* æ”¯æŸ± */
        .pillar {
            flex: 1;
            margin: 24px 12px;
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            border-radius: 18px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 24px 16px;
            color: white;
            text-align: center;
            box-shadow: 0 8px 22px rgba(37, 99, 235, 0.28);
            transition: transform .25s ease, box-shadow .25s ease;
            position: relative;
            overflow: hidden;
        }
        .pillar:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 28px rgba(37, 99, 235, 0.36);
        }
        .pillar:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.18), transparent);
            transition: left 0.6s ease;
        }
        .pillar:hover:before { left: 100%; }

        .pillar-icon {
            font-size: 28px;
            margin-bottom: 12px;
            opacity: 0.92;
            transition: transform .25s ease, filter .25s ease;
        }
        .pillar:hover .pillar-icon { transform: scale(1.1) rotate(6deg); filter: brightness(1.15); }

        .pillar-title {
            font-size: 16px;
            margin-bottom: 12px;
            border-bottom: 2px solid rgba(255,255,255,0.28);
            padding-bottom: 8px;
            font-weight: 800;
            letter-spacing: .3px;
        }

        .pillar-content {
            font-size: 13px;
            line-height: 1.55;
            opacity: 0.98;
            font-weight: 500;
        }

        .pillar-highlight {
            color: #fcd34d;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(252, 211, 77, 0.35);
        }

        /* æ¸è¿›å¼ä¿¡æ¯å±•ç¤º */
        .pillar-detail {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: all 0.35s ease;
            margin-top: 0;
            font-size: 11px;
            color: rgba(255,255,255,0.9);
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 0;
        }
        .pillar:hover .pillar-detail {
            max-height: 110px;
            opacity: 1;
            margin-top: 10px;
            padding-top: 8px;
        }

        /* åœ°åŸº */
        .foundation {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 24px;
            box-shadow: inset 0 8px 24px rgba(0,0,0,0.18);
        }
        
        .foundation-layer-1 { height: 150px; background: linear-gradient(135deg, #2f2f2f, #474747); }
        .foundation-layer-2 { height: 130px; background: linear-gradient(135deg, #474747, #5a5a5a); }
        .foundation-layer-3 { height: 115px; background: linear-gradient(135deg, #5a5a5a, #6b6b6b); border-radius: 0 0 24px 24px; }

        .foundation-item {
            background: rgba(255,255,255,0.12);
            border-radius: 18px;
            padding: 18px 22px;
            color: white;
            font-weight: 600;
            text-align: center;
            flex: 1;
            margin: 0 12px;
            backdrop-filter: blur(14px);
            border: 1px solid rgba(255,255,255,0.24);
            transition: transform .22s ease, box-shadow .22s ease, background .22s ease;
        }
        .foundation-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-4px);
            box-shadow: 0 10px 24px rgba(0,0,0,0.22);
        }

        .foundation-icon { font-size: 24px; margin-bottom: 10px; display: block; transition: transform .22s ease, filter .22s ease; }
        .foundation-item:hover .foundation-icon { transform: scale(1.12) rotate(4deg); filter: brightness(1.15); }

        .foundation-title { font-size: 15px; margin-bottom: 10px; color: #f8fafc; font-weight: 800; letter-spacing: .3px; }
        .foundation-content { font-size: 12px; opacity: 0.95; line-height: 1.45; font-weight: 500; }

        /* ç‰¹æ®Šæ ‡è¯† */
        .apple-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #f59e0b, #f97316);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 800;
            box-shadow: 0 6px 18px rgba(245, 158, 11, 0.35);
            transition: transform .22s ease, box-shadow .22s ease;
            cursor: default;
        }
        .apple-badge:hover { transform: scale(1.06); box-shadow: 0 8px 22px rgba(245, 158, 11, 0.48); }

        .legend {
            margin-top: 40px;
            text-align: center;
            color: #4b5563;
            font-size: 15px;
            font-style: italic;
            font-weight: 600;
        }
        .legend-highlight { color: #2563eb; font-weight: 800; }

        /* æ€§èƒ½ä¼˜åŒ– */
        * { box-sizing: border-box; }
        .pillar, .foundation-item, .unifi-logo, .roof-text { will-change: transform; backface-visibility: hidden; -webkit-backface-visibility: hidden; }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .roof {
                border-left-width: 250px;
                border-right-width: 250px;
                border-bottom-width: 80px;
            }

            .roof-text {
                width: auto;
                max-width: min(90vw, 420px);
                font-size: 16px;
                bottom: -75px;
                padding: 12px 20px;
            }
            
            .house-body { width: 100%; margin: -1px 0 0 0; min-height: 0; }
            .foundation { width: 100%; margin: 0; flex-direction: column; height: auto; padding: 20px 15px; }
            .foundation-layer-1, .foundation-layer-2, .foundation-layer-3 { height: auto; min-height: 100px; }

            .pillar { margin: 12px 24px; padding: 20px; }
            .foundation-item { margin: 8px 0; padding: 15px 20px; }

            .apple-badge { top: 15px; right: 15px; font-size: 10px; padding: 6px 12px; }
        }
        
        @media (max-width: 480px) {
            .container { padding: 16px; margin: 6px; }
            .roof { border-left-width: 180px; border-right-width: 180px; border-bottom-width: 60px; }
            .roof-text { width: auto; max-width: 90vw; font-size: 14px; padding: 10px 15px; bottom: -65px; }
            .roof-subtitle { font-size: 10px; }
            .pillar { margin: 10px 16px; padding: 16px; }
            .pillar-title { font-size: 14px; }
            .pillar-content { font-size: 11px; }
            .pillar-detail { font-size: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">
            UniFi å“ç‰Œå±‹æ¶æ„
            <div class="apple-badge">SMBç½‘ç»œç•Œçš„è‹¹æœ</div>
        </div>
        
        <div class="house">
            <!-- UniFi Logo -->
            <div class="unifi-logo">Ui</div>
            
            <!-- å±‹é¡¶ - å“ç‰Œå®šä½ -->
            <div class="roof">
                <div class="roof-text">
                    <div class="roof-main">è®©å¤æ‚çš„ä¼ä¸šç½‘ç»œå˜å¾—ç®€å•ä¼˜é›…</div>
                    <div class="roof-subtitle">"Rethinking IT" - æç®€ç¾å­¦ Ã— ä¼ä¸šçº§æ€§èƒ½ Ã— ç»Ÿä¸€ä½“éªŒ</div>
                </div>
            </div>
            
            <!-- æˆ¿å±‹ä¸»ä½“ - æ”¯æ’‘ç»´åº¦ -->
            <div class="house-body">
                <div class="pillar">
                    <div class="pillar-icon">ğŸ¨</div>
                    <div class="pillar-title">æç®€è®¾è®¡å“²å­¦</div>
                    <div class="pillar-content">
                        <span class="pillar-highlight">Apple-likeå·¥ä¸šè®¾è®¡</span><br>
                        æç®€ç™½è‰²ç¾å­¦<br>
                        ä¸“ä¸šç¯å¢ƒèåˆ<br>
                        æ„‰æ‚¦å¼€ç®±ä½“éªŒ
                    </div>
                    <div class="pillar-detail">ç²¾è‡´çš„é“åˆé‡‘å¤–å£³ï¼Œç»Ÿä¸€çš„LEDçŠ¶æ€æŒ‡ç¤ºï¼Œæ— å™ªéŸ³è¢«åŠ¨æ•£çƒ­è®¾è®¡</div>
                </div>
                
                <div class="pillar">
                    <div class="pillar-icon">ğŸ”„</div>
                    <div class="pillar-title">ç»Ÿä¸€ç”Ÿæ€ä½“éªŒ</div>
                    <div class="pillar-content">
                        <span class="pillar-highlight">å•ä¸€ç•Œé¢ç®¡æ§å…¨ç½‘</span><br>
                        UniFi OSç»Ÿä¸€å¹³å°<br>
                        æ— ç¼è®¾å¤‡äº’è”<br>
                        å¯è§†åŒ–ç½‘ç»œæ‹“æ‰‘
                    </div>
                    <div class="pillar-detail">ä»æ¥å…¥ç‚¹åˆ°äº¤æ¢æœºï¼Œä»é˜²ç«å¢™åˆ°ç›‘æ§ï¼Œæ‰€æœ‰è®¾å¤‡ç»Ÿä¸€ç®¡ç†</div>
                </div>
                
                <div class="pillar">
                    <div class="pillar-icon">ğŸ’¡</div>
                    <div class="pillar-title">å…è®¸å¯è¯æ¨¡å¼</div>
                    <div class="pillar-content">
                        <span class="pillar-highlight">é¢ è¦†ä¼ ç»Ÿæˆæœ¬ç»“æ„</span><br>
                        ä¸€æ¬¡è´­ä¹°ç»ˆèº«ä½¿ç”¨<br>
                        æ— æœˆè´¹æ— å¹´è´¹<br>
                        ä¼ä¸šçº§é›¶è®¢é˜…
                    </div>
                    <div class="pillar-detail">ä¼ ç»Ÿä¼ä¸šç½‘ç»œæ¯å¹´è®¸å¯è´¹é«˜è¾¾50%+ï¼ŒUniFiä¸€æ¬¡è´­ä¹°æ°¸ä¹…ä½¿ç”¨</div>
                </div>
                
                <div class="pillar">
                    <div class="pillar-icon">ğŸš€</div>
                    <div class="pillar-title">æŒç»­åˆ›æ–°èƒ½åŠ›</div>
                    <div class="pillar-content">
                        <span class="pillar-highlight">å‰æ²¿æŠ€æœ¯å¼•é¢†</span><br>
                        WiFi 7 / 6GHz<br>
                        AIé©±åŠ¨ä¼˜åŒ–<br>
                        äº‘è¾¹ååŒæ¶æ„
                    </div>
                    <div class="pillar-detail">ç‡å…ˆæ”¯æŒWiFi 7æ ‡å‡†ï¼Œ6GHzé¢‘æ®µè§£å†³é¢‘è°±æ‹¥å¡ï¼ŒAIå¯è§†åŒ–åˆ†æ</div>
                </div>
            </div>
            
            <!-- åœ°åŸºç¬¬ä¸€å±‚ - æ ¸å¿ƒç¡¬ä»¶ç”Ÿæ€ -->
            <div class="foundation foundation-layer-1">
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸ“¡</span>
                    <div class="foundation-title">UniFi WiFi</div>
                    <div class="foundation-content">WiFi 7æ¥å…¥ç‚¹<br>6GHzä¸‰é¢‘è¦†ç›–<br>æ™ºèƒ½æ¼«æ¸¸ä¼˜åŒ–</div>
                </div>
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸ”€</span>
                    <div class="foundation-title">UniFi Switching</div>
                    <div class="foundation-content">PoE++äº¤æ¢æœº<br>äº‘ç®¡ç†äº¤æ¢<br>ç«¯å£é•œåƒåˆ†æ</div>
                </div>
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸ›¡ï¸</span>
                    <div class="foundation-title">UniFi Gateway</div>
                    <div class="foundation-content">é›†æˆå®‰å…¨ç½‘å…³<br>IDS/IPSé˜²æŠ¤<br>VPNè¿œç¨‹æ¥å…¥</div>
                </div>
                <div class="foundation-item">
                    <span class="foundation-icon">â˜ï¸</span>
                    <div class="foundation-title">Cloud Gateways</div>
                    <div class="foundation-content">WiFié›†æˆç½‘å…³<br>è¾¹ç¼˜è®¡ç®—èƒ½åŠ›<br>æ··åˆäº‘éƒ¨ç½²</div>
                </div>
            </div>
            
            <!-- åœ°åŸºç¬¬äºŒå±‚ - UniFi OSç»Ÿä¸€å¹³å° -->
            <div class="foundation foundation-layer-2">
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸŒ</span>
                    <div class="foundation-title">UniFi Network</div>
                    <div class="foundation-content">ç½‘ç»œè®¾å¤‡ç»Ÿä¸€ç®¡ç†<br>å®æ—¶æ€§èƒ½ç›‘æ§<br>æ‹“æ‰‘å¯è§†åŒ–</div>
                </div>
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸ¥</span>
                    <div class="foundation-title">UniFi Protect</div>
                    <div class="foundation-content">AIæ™ºèƒ½ç›‘æ§<br>æœ¬åœ°å­˜å‚¨å¤„ç†<br>éšç§ä¼˜å…ˆè®¾è®¡</div>
                </div>
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸ”</span>
                    <div class="foundation-title">UniFi Access</div>
                    <div class="foundation-content">æ™ºèƒ½é—¨ç¦æ§åˆ¶<br>èº«ä»½è®¤è¯é›†æˆ<br>è®¿å®¢ç®¡ç†ç³»ç»Ÿ</div>
                </div>
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸ“</span>
                    <div class="foundation-title">UniFi Talk</div>
                    <div class="foundation-content">ä¼ä¸šé€šä¿¡å¹³å°<br>SIPç”µè¯ç³»ç»Ÿ<br>ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡</div>
                </div>
            </div>
            
            <!-- åœ°åŸºç¬¬ä¸‰å±‚ - å¢å€¼æœåŠ¡ç”Ÿæ€ -->
            <div class="foundation foundation-layer-3">
                <div class="foundation-item">
                    <span class="foundation-icon">â˜ï¸</span>
                    <div class="foundation-title">UniFi Cloud</div>
                    <div class="foundation-content">è¿œç¨‹ç®¡ç†æœåŠ¡<br>è‡ªåŠ¨å¤‡ä»½æ¢å¤<br>å¤šç«™ç‚¹ç»Ÿä¸€æ§åˆ¶</div>
                </div>
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸ¯</span>
                    <div class="foundation-title">Design Center</div>
                    <div class="foundation-content">ç½‘ç»œè§„åˆ’ä»¿çœŸ<br>RFè¦†ç›–è®¾è®¡<br>å®¹é‡è§„åˆ’å·¥å…·</div>
                </div>
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸ‘¥</span>
                    <div class="foundation-title">ç¤¾åŒºç”Ÿæ€</div>
                    <div class="foundation-content">æ´»è·ƒå¼€å‘è€…ç¤¾åŒº<br>ä¸°å¯ŒçŸ¥è¯†åº“<br>ç”¨æˆ·äº’åŠ©ç½‘ç»œ</div>
                </div>
                <div class="foundation-item">
                    <span class="foundation-icon">ğŸ“</span>
                    <div class="foundation-title">ä¸“ä¸šæœåŠ¡</div>
                    <div class="foundation-content">è®¤è¯åŸ¹è®­ä½“ç³»<br>æŠ€æœ¯æ”¯æŒæœåŠ¡<br>åˆä½œä¼™ä¼´ç½‘ç»œ</div>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <span class="legend-highlight">"å®¢æˆ·è§†è§’é©±åŠ¨"</span> - ä»ç”¨æˆ·ç—›ç‚¹å‡ºå‘ï¼Œé‡æ–°è®¾è®¡æ•´ä¸ªITç®¡ç†ä½“éªŒ
        </div>
    </div>

    <!-- ç¼–è¾‘å™¨åˆ‡æ¢æŒ‰é’®å’Œå·¥å…·æ¡ -->
    <button id="editorToggle" aria-label="åˆ‡æ¢ç¼–è¾‘æ¨¡å¼">âœ ç¼–è¾‘</button>
    <div id="editorBar" hidden>
        <div class="editor-bar-inner">
            <strong>ç¼–è¾‘æ¨¡å¼</strong>
            <div class="editor-actions">
                <button id="btnSave">ä¿å­˜</button>
                <button id="btnReset">é‡ç½®</button>
                <button id="btnExport">å¯¼å‡º</button>
                <button id="btnImport">å¯¼å…¥</button>
                <button id="btnExit">é€€å‡º</button>
                <input id="fileImport" type="file" accept="application/json" hidden />
            </div>
        </div>
        <div class="editor-hint">æç¤ºï¼šç‚¹å‡»é«˜äº®åŒºåŸŸå³å¯ç›´æ¥ç¼–è¾‘ã€‚æ ‡é¢˜å»ºè®®åªè¾“å…¥çº¯æ–‡æœ¬ï¼Œå†…å®¹æ”¯æŒæ¢è¡Œï¼ˆå›è½¦ï¼‰ä¸åŸºæœ¬å†…è”æ ·å¼ã€‚</div>
    </div>
</body>
<style>
/* å†…è”ç¼–è¾‘å™¨ UI æ ·å¼ */
#editorToggle {
  position: fixed;
  right: 18px;
  bottom: 18px;
  z-index: 1000;
  background: linear-gradient(45deg, #0ea5e9, #2563eb);
  color: #fff;
  border: none;
  border-radius: 999px;
  padding: 10px 16px;
  font-weight: 800;
  box-shadow: 0 10px 24px rgba(14,165,233,0.35);
  cursor: pointer;
}
#editorToggle:hover{ transform: translateY(-1px); box-shadow: 0 12px 28px rgba(14,165,233,0.45); }

#editorBar {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: 80px;
  width: min(92vw, 980px);
  background: rgba(255,255,255,0.95);
  border: 1px solid rgba(0,0,0,0.05);
  box-shadow: 0 16px 40px rgba(0,0,0,0.18);
  border-radius: 14px;
  z-index: 1000;
  backdrop-filter: saturate(1.1) blur(6px);
}
.editor-bar-inner{ display:flex; align-items:center; justify-content:space-between; padding: 10px 16px; }
.editor-actions button{ margin-left:8px; }
.editor-actions button, #btnExit{
  background:#111827; color:#fff; border:none; border-radius:8px; padding:8px 12px; cursor:pointer;
}
.editor-actions button:hover{ filter: brightness(1.05); }
.editor-hint{ font-size:12px; color:#4b5563; padding: 0 16px 12px; }

/* å¯ç¼–è¾‘é«˜äº® */
.editable-highlight{ outline: 2px dashed rgba(14,165,233,0.6); outline-offset: 2px; border-radius: 6px; background: rgba(14,165,233,0.06); }
.editable-highlight:focus{ outline-color: #2563eb; background: rgba(37,99,235,0.08); }
</style>
<script>
(function(){
  const LS_KEY = 'brandhouse_editor_v1';

  function sanitizeHTML(html){
    // åŸºç¡€æ¸…æ´—ï¼šç§»é™¤ <script> ä¸å†…è” on* äº‹ä»¶å±æ€§
    const div = document.createElement('div');
    div.innerHTML = html;
    const scripts = div.querySelectorAll('script');
    scripts.forEach(s => s.remove());
    div.querySelectorAll('*').forEach(el => {
      [...el.attributes].forEach(attr => {
        if (/^on/i.test(attr.name)) el.removeAttribute(attr.name);
      });
    });
    return div.innerHTML;
  }

  function getNodes(){
    const roofMain = document.querySelector('.roof-main');
    const roofSubtitle = document.querySelector('.roof-subtitle');
    const pillars = Array.from(document.querySelectorAll('.pillar')).map(p => ({
      title: p.querySelector('.pillar-title'),
      content: p.querySelector('.pillar-content'),
      detail: p.querySelector('.pillar-detail')
    }));
    const foundations = Array.from(document.querySelectorAll('.foundation')).map(f =>
      Array.from(f.querySelectorAll('.foundation-item')).map(item => ({
        title: item.querySelector('.foundation-title'),
        content: item.querySelector('.foundation-content')
      }))
    );
    return { roofMain, roofSubtitle, pillars, foundations };
  }

  function buildModelFromDOM(){
    const { roofMain, roofSubtitle, pillars, foundations } = getNodes();
    return {
      roof: {
        main: roofMain ? sanitizeHTML(roofMain.innerHTML.trim()) : '',
        subtitle: roofSubtitle ? sanitizeHTML(roofSubtitle.innerHTML.trim()) : ''
      },
      pillars: pillars.map(n => ({
        title: n.title ? n.title.textContent.trim() : '',
        content: n.content ? sanitizeHTML(n.content.innerHTML.trim()) : '',
        detail: n.detail ? sanitizeHTML(n.detail.innerHTML.trim()) : ''
      })),
      foundations: foundations.map(layer => layer.map(n => ({
        title: n.title ? n.title.textContent.trim() : '',
        content: n.content ? sanitizeHTML(n.content.innerHTML.trim()) : ''
      })))
    };
  }

  function applyModelToDOM(model){
    const { roofMain, roofSubtitle, pillars, foundations } = getNodes();
    if(model.roof){
      if(roofMain && typeof model.roof.main === 'string') roofMain.innerHTML = sanitizeHTML(model.roof.main);
      if(roofSubtitle && typeof model.roof.subtitle === 'string') roofSubtitle.innerHTML = sanitizeHTML(model.roof.subtitle);
    }
    if(Array.isArray(model.pillars)){
      model.pillars.forEach((m, i) => {
        const node = pillars[i]; if(!node) return;
        if(node.title && typeof m.title === 'string') node.title.textContent = m.title;
        if(node.content && typeof m.content === 'string') node.content.innerHTML = sanitizeHTML(m.content);
        if(node.detail && typeof m.detail === 'string') node.detail.innerHTML = sanitizeHTML(m.detail);
      });
    }
    if(Array.isArray(model.foundations)){
      model.foundations.forEach((layer, li) => {
        const layerNodes = foundations[li]; if(!layerNodes) return;
        layer.forEach((m, ii) => {
          const node = layerNodes[ii]; if(!node) return;
          if(node.title && typeof m.title === 'string') node.title.textContent = m.title;
          if(node.content && typeof m.content === 'string') node.content.innerHTML = sanitizeHTML(m.content);
        });
      });
    }
  }

  function setEditing(enabled){
    const { roofMain, roofSubtitle, pillars, foundations } = getNodes();
    const setNode = (el, on) => {
      if(!el) return;
      if(on){ el.setAttribute('contenteditable','true'); el.classList.add('editable-highlight'); }
      else { el.removeAttribute('contenteditable'); el.classList.remove('editable-highlight'); }
    };
    setNode(roofMain, enabled);
    setNode(roofSubtitle, enabled);
    pillars.forEach(n => { setNode(n.title, enabled); setNode(n.content, enabled); setNode(n.detail, enabled); });
    foundations.forEach(layer => layer.forEach(n => { setNode(n.title, enabled); setNode(n.content, enabled); }));
    document.getElementById('editorBar').hidden = !enabled;
  }

  // åˆå§‹ï¼šå¦‚æœ‰æœ¬åœ°å­˜å‚¨ï¼Œåº”ç”¨
  try {
    const saved = localStorage.getItem(LS_KEY);
    if(saved){
      const model = JSON.parse(saved);
      applyModelToDOM(model);
    }
  } catch(e) { /* ignore */ }

  // ç»‘å®š UI
  const toggle = document.getElementById('editorToggle');
  const btnSave = document.getElementById('btnSave');
  const btnReset = document.getElementById('btnReset');
  const btnExport = document.getElementById('btnExport');
  const btnImport = document.getElementById('btnImport');
  const fileImport = document.getElementById('fileImport');

  let editing = false;

  toggle.addEventListener('click', () => {
    editing = !editing;
    setEditing(editing);
    toggle.textContent = editing ? 'âœ“ ç¼–è¾‘ä¸­' : 'âœ ç¼–è¾‘';
  });

  document.getElementById('btnExit').addEventListener('click', () => {
    editing = false;
    setEditing(false);
    toggle.textContent = 'âœ ç¼–è¾‘';
  });

  btnSave.addEventListener('click', () => {
    const model = buildModelFromDOM();
    try {
      localStorage.setItem(LS_KEY, JSON.stringify(model));
      alert('å·²ä¿å­˜åˆ°æœ¬åœ°æµè§ˆå™¨ï¼ˆlocalStorageï¼‰ã€‚');
    } catch(e) {
      alert('ä¿å­˜å¤±è´¥ï¼š' + e.message);
    }
  });

  btnReset.addEventListener('click', () => {
    if(!confirm('ç¡®è®¤é‡ç½®ä¸ºé»˜è®¤å†…å®¹ï¼Ÿæ­¤æ“ä½œä¸ä¼šåˆ é™¤æœ¬åœ°æ–‡ä»¶ï¼Œä½†ä¼šè¦†ç›–æµè§ˆå™¨ä¸­ä¿å­˜çš„å†…å®¹ã€‚')) return;
    try { localStorage.removeItem(LS_KEY); } catch(e) {}
    // ä»¥å½“å‰é¡µé¢å‡ºå‚å†…å®¹ä¸ºâ€œé»˜è®¤â€ï¼Œå¯åˆ·æ–°æ¢å¤ï¼›æ­¤å¤„ç›´æ¥åˆ·æ–°é¡µé¢æœ€ç¨³å¦¥
    location.reload();
  });

  btnExport.addEventListener('click', () => {
    const model = buildModelFromDOM();
    const blob = new Blob([JSON.stringify(model, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'brandhouse-content.json'; a.click();
    URL.revokeObjectURL(url);
  });

  btnImport.addEventListener('click', () => fileImport.click());
  fileImport.addEventListener('change', (e) => {
    const file = e.target.files && e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      try {
        const data = JSON.parse(reader.result);
        applyModelToDOM(data);
        localStorage.setItem(LS_KEY, JSON.stringify(data));
        alert('å¯¼å…¥å¹¶ä¿å­˜æˆåŠŸ');
      } catch(err){
        alert('å¯¼å…¥å¤±è´¥ï¼šJSON æ ¼å¼ä¸æ­£ç¡®');
      }
    };
    reader.readAsText(file);
  });
})();
</script>
</html>